{"name":"store_and_retrieve_conversation","description":"Store a conversation turn and retrieve it through multiple access paths","given":"A clean storage directory","when":"I store a conversation turn with user message and AI response","then":["Bridge Block is created on disk as JSON","Turn can be retrieved by block ID","Turn can be found through keyword search","Facts are extracted and stored in SQLite"],"validates":["XDG directory initialization","JSON file persistence","SQLite fact storage","Keyword-based memory search"],"test_file":".scratch/scenario_01_store_retrieve_test.go"}
{"name":"governor_routing_scenarios","description":"Governor routes incoming turns using 4 scenarios based on topic matching","given":"A storage instance with various Bridge Blocks in different states","when":"I submit turns with different topic characteristics","then":["Topic Continuation: Similar turn appends to active block","Topic Resumption: Turn matching paused block reactivates it","New Topic First: First turn with no active blocks creates new block","Topic Shift: Different turn with active block triggers shift"],"validates":["Keyword-based topic matching","Active/Paused block status tracking","Routing decision logic for all 4 scenarios","Block status updates via storage methods"],"test_file":".scratch/scenario_02_routing_test.go"}
{"name":"hierarchical_chunking","description":"ChunkEngine splits text into hierarchical turn → paragraph → sentence chunks","given":"A ChunkEngine instance","when":"I chunk multi-paragraph messages with multiple sentences","then":["Turn-level chunk is created with full text","Paragraphs are split by double newlines","Sentences are split by period-space delimiters","Parent-child relationships are maintained","All chunk IDs are unique"],"validates":["Hierarchical text chunking","Turn → paragraph → sentence hierarchy","Parent chunk ID tracking","Unique chunk ID generation","Empty text error handling"],"test_file":".scratch/scenario_03_chunking_test.go"}
